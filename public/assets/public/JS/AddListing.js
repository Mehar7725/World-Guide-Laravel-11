const staticData = [
  { title: "Duration", checked: true },
  { title: "Contact Display", checked: true },
  { title: "Video", checked: true },
  { title: "Location", checked: true },
  { title: "Social Links", checked: true },
  { title: "Price Range", checked: true },
  { title: "Resurva", checked: true },
  { title: "Menu", checked: true },
  { title: "Deals-Offers-Discounts", checked: true },
  { title: "Events", checked: true },
  { title: "Lead Form", checked: true },
  { title: "Will be List of", checked: true },
  { title: "Map Display", checked: true },
  { title: "Image Gallery", checked: true },
  { title: "Business Tagline", checked: true },
  { title: "Website", checked: true },
  { title: "FAQ", checked: true },
  { title: "Business Hours", checked: true },
  { title: "Timekit", checked: true },
  { title: "Announcement", checked: true },
  { title: "Hide Competitors Ads", checked: true },
  { title: "Bookings", checked: true },
  { title: "Hide Google Ads", checked: true },
];

const App_Site_Data1 = [
  { title: "Duration : 365 days", checked: true },
  { title: "Contact Display", checked: true },
  { title: "Video", checked: true },
  { title: "Location", checked: true },
  { title: "Social Links", checked: true },
  { title: "Price Range", checked: true },
  { title: "Resurva", checked: true },
  { title: "Menu", checked: true },
  { title: "Deals-Offers-Discounts", checked: true },
  { title: "Events", checked: true },
  { title: "Lead Form", checked: true },
  { title: "Map Display", checked: true },
  { title: "Image Gallery", checked: true },
  { title: "Business Tagline", checked: true },
  { title: "Website", checked: true },
  { title: "FAQ", checked: true },
  { title: "Business Hours", checked: true },
  { title: "Timekit", checked: true },
  { title: "Announcement", checked: true },
  { title: "Hide Competitors Ads", checked: true },
  { title: "Bookings", checked: true },
  { title: "Hide Google Ads", checked: true },
];

const App_Site_Data6 = [
  { title: "Duration : 183 days", checked: true },
  { title: "Contact Display", checked: true },
  { title: "Video", checked: true },
  { title: "Location", checked: true },
  { title: "Social Links", checked: true },
  { title: "Price Range", checked: true },
  { title: "Resurva", checked: true },
  { title: "Menu", checked: true },
  { title: "Deals-Offers-Discounts", checked: true },
  { title: "Events", checked: true },
  { title: "Lead Form", checked: true },
  { title: "Map Display", checked: true },
  { title: "Image Gallery", checked: true },
  { title: "Business Tagline", checked: true },
  { title: "Website", checked: true },
  { title: "FAQ", checked: true },
  { title: "Business Hours", checked: true },
  { title: "Timekit", checked: true },
  { title: "Announcement", checked: true },
  { title: "Hide Competitors Ads", checked: true },
  { title: "Bookings", checked: true },
  { title: "Hide Google Ads", checked: true },
];

const App_Site_Data3 = [
  { title: "Duration : 90 days", checked: true },
  { title: "Contact Display", checked: true },
  { title: "Video", checked: true },
  { title: "Location", checked: true },
  { title: "Social Links", checked: true },
  { title: "Price Range", checked: true },
  { title: "Resurva", checked: true },
  { title: "Menu", checked: true },
  { title: "Deals-Offers-Discounts", checked: true },
  { title: "Events", checked: true },
  { title: "Lead Form", checked: true },
  { title: "Map Display", checked: true },
  { title: "Image Gallery", checked: true },
  { title: "Business Tagline", checked: true },
  { title: "Website", checked: true },
  { title: "FAQ", checked: true },
  { title: "Business Hours", checked: true },
  { title: "Timekit", checked: true },
  { title: "Announcement", checked: true },
  { title: "Hide Competitors Ads", checked: true },
  { title: "Bookings", checked: true },
  { title: "Hide Google Ads", checked: true },
];

const Prime_Data = [
  { title: "Duration : 90 days", checked: true },
  { title: "Contact Display", checked: true },
  { title: "Video", checked: true },
  { title: "Location", checked: true },
  { title: "Social Links", checked: true },
  { title: "Price Range", checked: true },
  { title: "Resurva", checked: true },
  { title: "Menu", checked: true },
  { title: "Deals-Offers-Discounts", checked: true },
  { title: "Events", checked: true },
  { title: "Lead Form", checked: true },
  { title: "The Ads will be at Top of Pages", checked: true },
  { title: "Own Your page direct link in google search", checked: true },
  { title: "Map Display", checked: true },
  { title: "Image Gallery", checked: true },
  { title: "Business Tagline", checked: true },
  { title: "Website", checked: true },
  { title: "FAQ", checked: true },
  { title: "Business Hours", checked: true },
  { title: "Timekit", checked: true },
  { title: "Announcement", checked: true },
  { title: "Hide Competitors Ads", checked: true },
  { title: "Bookings", checked: true },
  { title: "Hide Google Ads", checked: true },
  { title: "Show in Google Pages", checked: true },
  { title: "Continue To free plan after Expire", checked: true },
];

const free_data = [
  {
    title: "Duration:",
    checked: true,
    item: "Unlimited days",
  },
  {
    title: "Contact Display",
    checked: false,
    item: null,
  },
  {
    title: "Video",
    checked: false,
    item: null,
  },
  {
    title: "Location",
    checked: true,
    item: null,
  },
  {
    title: "Social Links",
    checked: false,
    item: null,
  },
  {
    title: "Price Range",
    checked: true,
    item: null,
  },
  {
    title: "Resurva",
    checked: false,
    item: null,
  },
  {
    title: "Menu",
    checked: false,
    item: null,
  },
  {
    title: "Deals-Offers-Discounts",
    checked: false,
    item: null,
  },
  {
    title: "Events",
    checked: false,
    item: null,
  },
  {
    title: "Lead Form",
    checked: true,
    item: null,
  },
  {
    title: "Map Display",
    checked: true,
    item: null,
  },
  {
    title: "Image Gallery",
    checked: true,
    item: null,
  },
  {
    title: "Business Tagline",
    checked: false,
    item: null,
  },
  {
    title: "Website",
    checked: false,
    item: null,
  },
  {
    title: "FAQ",
    checked: false,
    item: null,
  },
  {
    title: "Business Hours",
    checked: true,
    item: null,
  },
  {
    title: "Timekit",
    checked: false,
    item: null,
  },
  { title: "Hide Competitors Ads", checked: true, item: null },
];

const pkg_details = [
  { name: "Static 90 Days -Ads Site", pricing: "$30", time: "90 Day" },
  { name: "App & Site Ads 1 Year- Static", pricing: "$100", time: "365 Day" },
  { name: "App & Site Ads 6 Year- Static", pricing: "$70", time: "2190 Day" },
  { name: "App & Site Ads 3 Year- Static", pricing: "$50", time: "1095 Day" },
  { name: "Prime level", pricing: "$20", time: "60 Day" },
  { name: "Free Ads", pricing: "Free", time: "30 Day" },
];

function createPkgCards() {
  const container = document.getElementById("pkgContainer");

  pkg_details.forEach((pkg) => {
    // Create card container
    const card = document.createElement("div");
    card.className =
      "max-w-[450px] w-[450px] flex flex-col   gap-y-3   px-3 items-center justify-center relative border-[1px] border-blue-600 relative card-pkg";

    const radioContainer = document.createElement("div");
    radioContainer.className =
      "flex items-center justify-start w-full px-3 mb-2 text-xl font-bold";

    const radioInput = document.createElement("input");
    radioInput.type = "radio";
    radioInput.name = "pkg"; // Grouping radio buttons
    radioInput.value = pkg.name; // Value of the radio button
    radioInput.setAttribute("data-pricing", pkg.pricing); // Setting a custom data attribute
    radioInput.setAttribute("data-time", pkg.time); // Setting a custom data attribute
     

    const radioLabel = document.createElement("label");
    radioLabel.className = "ml-2 text-black";
    radioLabel.textContent = pkg.name; // Set the label text to pkg.name

    const pricingConatiner = document.createElement("div");
    pricingConatiner.className =
      "flex items-center gap-x-1 justify-end w-full text-xl";

    const pricingAmount = document.createElement("div");
    pricingAmount.className = "font-bold text-black";
    pricingAmount.textContent = pkg.pricing;

    const pricingDiv = document.createElement("div");
    pricingDiv.className =
      "font-normal text-sm text-gray-500 h-[110%] flex items-end";
    pricingDiv.textContent = " / Per Listing";

    pricingConatiner.appendChild(pricingAmount);
    pricingConatiner.appendChild(pricingDiv);

    radioContainer.appendChild(radioInput);
    radioContainer.appendChild(radioLabel);

    card.appendChild(radioContainer);
    card.appendChild(pricingConatiner);

    // Append card to container
    container.appendChild(card);
  });
}

function createPkgOptCards(opt_id) {
  const container = document.getElementById("pkgOptions");
  container.innerHTML = ""; // Clear all divs inside pkgOptions

  const pkg_option_sel =
    opt_id === 0
      ? staticData
      : opt_id === 1
      ? App_Site_Data1
      : opt_id === 2
      ? App_Site_Data6
      : opt_id === 3
      ? App_Site_Data3
      : opt_id === 4
      ? Prime_Data
      : opt_id === 5 && free_data;

  pkg_option_sel.forEach((pkg) => {
    // Create card container
    const card = document.createElement("div");
    card.className =
      "w-fit flex flex-col h-fit gap-y-1 items-center justify-center relative relative card-pkg";

    const checkboxContainer = document.createElement("div");
    checkboxContainer.className = "flex items-center";

    const imageContainer = document.createElement("div");
    imageContainer.className =
      "flex items-start justify-center cursor-pointer gap-x-1 max-w-[150px]";

    const image = document.createElement("img");
    if (pkg.checked) {
      image.src = "assets/public/images/done.png"; // Change to done image
    } else {
      image.src = "assets/public/images/cross.png"; // Change back to cross image
    }
    image.className = "w-5 h-5 mt-1"; // Set image size

    const name__ = document.createElement("div");
    name__.className = "text-gray-400";
    name__.innerHTML = pkg.title;

    imageContainer.appendChild(image);
    imageContainer.appendChild(name__);

    checkboxContainer.appendChild(imageContainer);

    card.appendChild(checkboxContainer);
    // Append card to container
    container.appendChild(card);
  });
}

createPkgCards();

const radioButtons = document.querySelectorAll('input[name="pkg"]');
let inDex;

radioButtons.forEach((radio, index) => {
  radio.addEventListener("change", (event) => {
    // Remove bg-gray-500 from all cards
    document.querySelectorAll(".card-pkg").forEach((card) => {
      card.classList.remove("bg-[#d8e7f8]");
    });

    // Add bg-[#d8e7f8] to the parent card of the selected radio button
    const selectedCard = document.querySelectorAll(".card-pkg")[index];
    if (selectedCard) {
      selectedCard.classList.add("bg-[#d8e7f8]");
      inDex = index;
      createPkgOptCards(index);
    }
  });
});


// Function to get the selected radio button's data attributes
function getSelectedPackageDetails() {
  const radioButtons = document.getElementsByName('pkg');
  for (const radio of radioButtons) {
    if (radio.checked) {
      // Return an object containing the pricing and time data attributes
      return {
        pricing: radio.getAttribute('data-pricing'),
        time: radio.getAttribute('data-time')
      };
    }
  }
  // Return null if no radio button is selected
  return null;
}

// Add event listener to the "Choose Plan" button
document.getElementById('btn-choose-plan').addEventListener('click', function () {
  const selectedPackage = getSelectedPackageDetails();
  if (selectedPackage) {
    // Extract pricing and time from the selected package
    const { pricing, time } = selectedPackage;

    // Encode the parameters to ensure they are URL-safe
    const encodedPricing = encodeURIComponent(pricing);
    const encodedTime = encodeURIComponent(time);

    // Construct the URL with query parameters
    const targetUrl = `/submit-listing?pricing=${encodedPricing}&time=${encodedTime}`;

    // Navigate to the constructed URL
    window.location.href = targetUrl;
  } else {
    // Alert the user to select a package if none is selected
    alert('Please select a package before proceeding.');
  }
});
